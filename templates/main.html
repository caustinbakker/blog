{% extends "layout.html" %}

{% block title %}Home{% endblock %}
{% block main %}
{% from "macros.html" import ppost %}

{{nav()}}

<!-- display 7 recent projects -->
<ul class='projects'>
    {% for project in projects.with_media() %}

        {% if loop.index <= 3 %}
            <li class='project_w'>
                <img src="{{project.post.media.media}}" alt="">
                <h2>{{project.name}}</h2>

            </li>

        {% else %}
            <li class='project_h'>
                <img src="{{project.post.media.media}}" alt="">
                <h2>{{project.name}}</h2>
            </li>

        {% endif %}
    {% endfor %}
</ul>
<!-- end projects -->
<header id='title_head'>
    <h1>Blog</h1>
</header>

<!-- timeline -->
<ul class='timeline'>
    <ul>
        <li id='line'></li>
        {% for post in posts %}
            <li class='{{ loop.cycle('timeline_top', 'timeline_bot') }}'>
                <a href="#{{post.id}}">{{post.name}}</a>
            </li>
        {% endfor %}
    </ul>
</ul>
<!-- end timeline -->

<!-- blog posts -->
<ul>
    {% for post in posts %}
        {% if post.get_media() %}
            <li id="{{post.id}}" class='{{ loop.cycle('blog_post_media_1', 'blog_post_media_2') }}'>
                <header>
                    <h3>{{post.name}}</h3>
                    <p>{{post.content}}</p>
                </header>

                <figure>
                    {% for media in post.get_media() %}
                    <img src="{{media.media}}" alt="">
                    {% endfor %}
                </figure>
            </li>
        {% else %}
            <li id="{{post.id}}" class="blog_post_nomedia">
                <header>
                    <h3>{{post.name}}</h3>
                    <p>{{post.content}}</p>
                </header>
            </li>
        {% endif %}
    {% endfor %}
</ul>

<footer></footer>
<script type="text/javascript" src="{{ url_for('static', filename='styles/js/project_loader.js') }}"></script>
<script type="text/javascript" src="{{ url_for('static', filename='styles/js/project_list.js') }}"></script>
{% endblock %}
